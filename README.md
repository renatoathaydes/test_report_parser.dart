# test_report_parser

[![Dartle CI](https://github.com/renatoathaydes/test_report_parser.dart/workflows/Dartle%20CI/badge.svg)](https://github.com/renatoathaydes/test_report_parser.dart/actions)
[![pub package](https://img.shields.io/pub/v/test_report_parser.svg)](https://pub.dev/packages/test_report_parser)

This library contains an auto-generated Dart Model representing the events emitted by the Dart Tests JSON reporter.

It can be used to parse the Dart Test JSON report into typed Dart objects for further processing.

The model is generated by parsing the [json_reporter.md](https://raw.githubusercontent.com/dart-lang/test/master/pkgs/test/doc/json_reporter.md)
page, which documents the Dart Test JSON reporter output.

## Using test_report_parser

Basically, call the function `parseJsonToEvent(String)` for each line of output from the JSON Test Reporter:

```dart
import 'package:test_report_parser/test_report_parser.dart';

void main() {
  final event = parseJsonToEvent('{"success":true,"type":"done","time":36361}');
  print(event);

  if (event is DoneEvent) {
    if (event.success) {
      print('!!!!!! Tests were successful !!!!!!');
    } else {
      print('XXXXXX There were failures. XXXXXX');
    }
  }
}
```

Check [test_report_parser_example.dart](example/test_report_parser_example.dart) for a full example.

See also the generated [Dart Model](lib/src/model.g.dart).

## Building

This project relies on [Dartle](https://github.com/renatoathaydes/dartle/) to run the build.

If you have `dartle` installed, run `dartle generate` at the project root directory to generate the model locally,
then run `dartle` to run the complete build.

Otherwise, run the build using `dart` as following:

```bash
dart pub get
dart dartle.dart generate

# Run a full build using Dartle
dart dartle.dart

# Run tests only
dart run test
```
